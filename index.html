<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GameWiki - La Enciclopedia del Gaming</title>
    <!-- PWA -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#3b82f6">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="apple-touch-icon" href="public/logo.png">
    <link rel="icon" type="image/png" href="public/logo.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Montserrat:wght@700;800&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="src/styles.css">
</head>

<body>
    <header class="main-header">
        <div class="header-container">
            <div class="logo-container" id="home-link">
                <img src="public/logo.png" alt="GameWiki Logo" class="nav-logo-icon">
                <span class="logo-text">GAME<span style="color: var(--primary);">WIKI</span></span>
            </div>

            <div class="search-wrapper">
                <div class="search-bar">
                    <svg class="search-icon" viewBox="0 0 24 24" width="20" height="20">
                        <path
                            d="M15.5 14h-.79l-.28-.27a6.5 6.5 0 0 0 1.48-5.34c-.47-2.78-2.79-5-5.59-5.34a6.505 6.505 0 0 0-7.27 7.27c.34 2.8 2.56 5.12 5.34 5.59a6.5 6.5 0 0 0 5.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49 0 .41-.41.41-1.08 0-1.49L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"
                            fill="currentColor" />
                    </svg>
                    <input type="text" id="game-search" placeholder="Busca un juego..." autocomplete="off">
                    <button id="clear-search-btn" class="filters-toggle-btn" style="display: none;"
                        title="Clear Search">
                        <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M18 6L6 18M6 6l12 12" />
                        </svg>
                    </button>
                    <button id="filters-toggle-btn" class="filters-toggle-btn" title="Advanced Filters">
                        <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M22 3H2l8 9.46V19l4 2v-8.54L22 3z" />
                        </svg>
                    </button>
                </div>
                <div id="search-filters-panel" class="search-filters-panel hidden">
                    <div class="filters-row">
                        <select id="filter-genre" class="filter-select">
                            <option value="">All Genres</option>
                        </select>
                        <select id="filter-year" class="filter-select">
                            <option value="">All Years</option>
                        </select>
                        <select id="filter-developer" class="filter-select">
                            <option value="">All Developers</option>
                        </select>
                        <button id="clear-filters-btn" class="clear-filters-btn">Clear</button>
                    </div>
                </div>
                <div id="search-results" class="search-results hidden"></div>
            </div>

            <div class="actions">
                <button id="favorites-btn" class="favorites-header-btn" title="My Favorites">
                    <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2">
                        <path
                            d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z" />
                    </svg>
                    <span id="favorites-count" class="favorites-count">0</span>
                </button>
                <button id="theme-toggle" class="theme-btn" title="Toggle Dark Mode">
                    <svg class="theme-icon-light" viewBox="0 0 24 24" width="20" height="20">
                        <path
                            d="M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58a.996.996 0 0 0-1.41 0 .996.996 0 0 0 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37a.996.996 0 0 0-1.41 0 .996.996 0 0 0 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41l-1.06-1.06zm1.06-12.37a.996.996 0 0 0-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06a.996.996 0 0 0 0-1.41zM5.99 18.01l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06c.39-.39.39-1.03 0-1.41s-1.03-.39-1.41 0z"
                            fill="currentColor" />
                    </svg>
                </button>
                <button id="lang-toggle" class="lang-btn">
                    <span id="lang-text">EN</span>
                </button>
                <button id="achievements-btn" class="kbd-btn" title="Achievements">
                    <span style="font-size: 1.2rem;">🏆</span>
                </button>
                <button id="kbd-shortcuts-btn" class="kbd-btn" title="Keyboard Shortcuts">
                    <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3" />
                    </svg>
                </button>
            </div>
        </div>
    </header>

    <main id="app-content">
        <!-- Pull to Refresh Indicator -->
        <div id="pull-refresh" class="pull-refresh-indicator">
            <svg viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2"
                class="refresh-icon">
                <path d="M23 4v6h-6M1 20v-6h6M3.51 9a9 9 0 0114.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0020.49 15" />
            </svg>
        </div>
        <!-- Home Presentation Section -->
        <section id="hero" class="hero-section">
            <div class="hero-content">
                <h1 id="hero-title">Bienvenidos a GameWiki</h1>
                <p id="hero-subtitle">La enciclopedia definitiva con más de 100 títulos legendarios analizados en
                    detalle.</p>
                <div class="hero-stats">
                    <div class="stat-item">
                        <span class="stat-value">100+</span>
                        <span class="stat-label" id="stat-games">Juegos</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-value">Bilingual</span>
                        <span class="stat-label" id="stat-lang">ES / EN</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Dynamic Content Section -->
        <div id="wiki-container" class="wiki-container hidden">
            <aside class="wiki-sidebar" id="wiki-sidebar"></aside>
            <article class="wiki-article" id="wiki-article"></article>
            <aside class="wiki-appearance-sidebar" id="wiki-appearance-sidebar"></aside>
        </div>

        <div id="genre-filter" class="genre-filter-container container">
            <!-- Genre buttons will be injected here -->
        </div>

        <section id="game-grid" class="game-grid">
            <!-- Grid of games for the home page -->
        </section>
        <div id="load-more-trigger" class="load-more-trigger">
            <div class="loader-dots">
                <span></span><span></span><span></span>
            </div>
        </div>
    </main>

    <footer class="main-footer">
        <p>&copy; 2025 GameWiki. Hecho por Akiyama para fans.</p>
        <div style="display: flex; gap: 1rem; align-items: center; justify-content: center; margin-top: 0.5rem;">
            <p style="margin: 0;">Game data provided by <a href="https://rawg.io/" target="_blank">RAWG</a></p>
            <button onclick="setupRAWG()" class="lang-btn"
                style="padding: 0.2rem 0.6rem; font-size: 0.75rem; opacity: 0.8;" title="Configurar API Key">
                <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M12 15a3 3 0 100-6 3 3 0 000 6z" />
                    <path
                        d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z" />
                </svg>
                API
            </button>
        </div>
    </footer>

    <div id="toast-container" class="toast-container"></div>

    <!-- Deals Modal -->
    <div id="deals-modal" class="modal hidden">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2 id="modal-title">Ofertas Disponibles</h2>
            <div id="modal-stores" class="modal-body">
                <!-- content injected via JS -->
            </div>
        </div>
    </div>

    <!-- Video Modal for Trailers -->
    <div id="video-modal" class="modal hidden">
        <div class="modal-content video-modal-content">
            <span class="close-modal">&times;</span>
            <div id="video-player-container">
                <!-- Video iframe will be injected here -->
            </div>
        </div>
    </div>

    <!-- Keyboard Shortcuts Modal -->
    <div id="kbd-modal" class="modal hidden">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2 id="kbd-modal-title">Atajos de Teclado</h2>
            <div class="kbd-modal-grid">
                <div class="kbd-item">
                    <kbd>/</kbd>
                    <span class="kbd-desc" data-key="kbd-search">Buscar juegos</span>
                </div>
                <div class="kbd-item">
                    <kbd>Alt</kbd> + <kbd>H</kbd>
                    <span class="kbd-desc" data-key="kbd-home">Ir al Inicio</span>
                </div>
                <div class="kbd-item">
                    <kbd>Alt</kbd> + <kbd>F</kbd>
                    <span class="kbd-desc" data-key="kbd-favs">Mis Favoritos</span>
                </div>
                <div class="kbd-item">
                    <kbd>Esc</kbd>
                    <span class="kbd-desc" data-key="kbd-esc">Cerrar ventanas / búsqueda</span>
                </div>
                <div class="kbd-item">
                    <kbd>↑</kbd> <kbd>↓</kbd>
                    <span class="kbd-desc" data-key="kbd-nav">Navegar resultados</span>
                </div>
                <div class="kbd-item">
                    <kbd>Enter</kbd>
                    <span class="kbd-desc" data-key="kbd-enter">Seleccionar resultado</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Achievements Modal -->
    <div id="achievements-modal" class="modal hidden">
        <div class="modal-content">
            <button class="close-modal">&times;</button>
            <h2 id="ach-modal-title">Logros de la Wiki</h2>
            <div id="achievements-grid" class="ach-grid">
                <!-- Data populated via JS -->
            </div>
        </div>
    </div>

    <!-- Lightbox for Image Gallery -->
    <div id="lightbox" class="lightbox">
        <button class="lightbox-close">&times;</button>
        <img class="lightbox-img" src="" alt="Full size screenshot">
    </div>

    <script src="src/data.js?v=2.1"></script>
    <script src="src/rawg-api.js?v=2.1"></script>
    <script src="src/search-functions.js?v=2.1"></script>
    <script src="src/achievements.js?v=2.1"></script>
    <script src="src/main.js?v=2.1"></script>
</body>

</html>